# ============================================================================
# KPI ETL Pipeline - Environment Configuration
# ============================================================================

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
PORT=3001
NODE_ENV=development

# Trust proxy if behind reverse proxy (nginx, load balancer, etc)
TRUST_PROXY=false

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
# Required for credential management and audit logging
DB_ENABLED=true
DB_HOST=localhost
DB_PORT=5432
DB_NAME=kpi_etl
DB_USER=postgres
DB_PASSWORD=postgres
DB_POOL_SIZE=20

# ============================================================================
# AUTHENTICATION (Clerk)
# ============================================================================
# Get these from https://dashboard.clerk.com
# JWT verification for credential management endpoints
CLERK_SECRET_KEY=sk_test_your_secret_key
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_publishable_key
# For JWT verification (RS256 public key from Clerk)
CLERK_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----
YOUR_CLERK_PUBLIC_KEY_HERE
-----END PUBLIC KEY-----"

# ============================================================================
# ENCRYPTION
# ============================================================================
# Master key for AES-256-GCM encryption (generate with: openssl rand -base64 32)
# IMPORTANT: Change this in production and keep it secret!
MASTER_ENCRYPTION_KEY=your_32_byte_base64_encoded_key_here

# Salt for deriving encryption keys from user IDs (legacy)
ENCRYPTION_KEY_SALT=your-random-salt-change-in-production

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://localhost:6379

# ============================================================================
# SCHEDULING
# ============================================================================
# Enable automatic sync scheduling
ENABLE_SCHEDULER=true

# Cron expression for sync schedule (default: 2:00 AM daily)
CRON_SCHEDULE=0 2 * * *

# Timezone for scheduler
TZ=Asia/Kolkata

# ============================================================================
# ETL RETRY CONFIGURATION
# ============================================================================
MAX_RETRIES=3

# ============================================================================
# GOOGLE SHEETS CONFIGURATION (Legacy)
# ============================================================================
# Default spreadsheet ID (used if not specified per service)
GOOGLE_SPREADSHEET_ID=your_spreadsheet_id_here

# Meta service configuration
META_ENABLED=true
META_SPREADSHEET_ID=your_meta_spreadsheet_id
META_SHEET_NAME=meta_raw_daily

# GA4 service configuration
GA4_ENABLED=true
GA4_SPREADSHEET_ID=your_ga4_spreadsheet_id
GA4_SHEET_NAME=Google

# Shopify service configuration
SHOPIFY_ENABLED=true
SHOPIFY_SPREADSHEET_ID=your_shopify_spreadsheet_id
SHOPIFY_SHEET_NAME=Shopify

# ============================================================================
# SERVICE CREDENTIALS (Legacy - for backward compatibility)
# ============================================================================
# These are replaced by the credential management system for new deployments
# Use the /api/credentials endpoints to manage credentials securely

# Meta Ads
# META_ACCESS_TOKEN=your_meta_token_here
# META_AD_ACCOUNT_ID=your_account_id_here

# Google Analytics 4
# GOOGLE_ACCESS_TOKEN=your_google_token_here
# GA4_PROPERTY_ID=your_property_id_here

# Shopify
# SHOPIFY_STORE_DOMAIN=mystore.myshopify.com
# SHOPIFY_ACCESS_TOKEN=your_shopify_token_here

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=info

# ============================================================================
# NOTIFICATION CONFIGURATION (Optional)
# ============================================================================
# Telegram notifications
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Email notifications
EMAIL_SERVICE=smtp
EMAIL_FROM=
EMAIL_TO=
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=

# ============================================================================
# SECURITY
# ============================================================================
# API Key for legacy endpoints (optional)
API_KEY=

# ============================================================================
# RATE LIMITING
# ============================================================================
# Rate limit: requests per minute per IP
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# Request timeout in milliseconds
REQUEST_TIMEOUT_MS=30000
